#include <stdbool.h>
#include <stdint.h>


#include <stdbool.h>
#include <stdio.h>
#include "main.h"

// ---- This source is automatically generated by Atom ----


static uint64_t __global_clock = 0;



static const uint32_t __coverage_len = 1;
static uint32_t __coverage[1] = {0};
static uint32_t __coverage_index = 0;
struct {  /* state_dvr */
  struct {  /* fibDvr */
    uint64_t oldInd;
    uint64_t valD;
    bool newInd;
    bool waiting;
  } fibDvr;
} state_dvr =
{  /* state_dvr */
  {  /* fibDvr */
    /* oldInd */  0ULL,
    /* valD */  1ULL,
    /* newInd */  true,
    /* waiting */  true
  }
};

/* fibDvr.getAns */
static void __r1() {
  bool __0 = state_dvr.fibDvr.waiting;
  bool __1 = ansReady;
  uint64_t __2 = x;
  uint64_t __3 = 50ULL;
  bool __4 = __2 < __3;
  bool __5 = __0 && __1 && __4;
  bool __6 = __4 && __1 && __0;
  uint64_t __7 = ans;
  uint64_t __8 = state_dvr.fibDvr.valD;
  uint64_t __9 = __6 ? __7 : __8;
  uint64_t __10 = 5ULL;
  uint64_t __11 = __2 + __10;
  uint64_t __12 = __6 ? __11 : __2;
  bool __13 = ! __6;
  bool __14 = __13 && __0;
  bool __15 = state_dvr.fibDvr.newInd;
  bool __16 = __13 && __15;
  bool __17 = ! __16;
  bool __18 = __13 && __17;
  bool __19 = ! __18;
  uint64_t __20 = state_dvr.fibDvr.oldInd;
  uint64_t __21 = __6 ? __2 : __20;
  if (__5) {
    printf("fibDvr.getAns: *[received]* ans <== %llu\n", __7);
    __coverage[0] = __coverage[0] | (1 << 1);
  }
  state_dvr.fibDvr.valD = __9;
  x = __12;
  state_dvr.fibDvr.waiting = __14;
  state_dvr.fibDvr.newInd = __19;
  state_dvr.fibDvr.oldInd = __21;
}

/* fibDvr.wait */
static void __r0() {
  bool __0 = valRcvd;
  bool __1 = state_dvr.fibDvr.waiting;
  bool __2 = ! __1;
  bool __3 = __0 && __2;
  bool __4 = __2 && __0;
  bool __5 = ! __4;
  bool __6 = state_dvr.fibDvr.newInd;
  bool __7 = __5 && __6;
  bool __8 = __5 && __1;
  bool __9 = ! __8;
  bool __10 = __5 && __9;
  bool __11 = ! __10;
  if (__3) {
    printf("fibDvr.wait\n");
    __coverage[0] = __coverage[0] | (1 << 0);
  }
  state_dvr.fibDvr.newInd = __7;
  state_dvr.fibDvr.waiting = __11;
}


static void __assertion_checks() {
}


void fibDvr()
{

  {
    static uint8_t __scheduling_clock = 0;
    if (__scheduling_clock == 0) {
      __assertion_checks(); __r1();  /* fibDvr.getAns */
      __scheduling_clock = 19;
    }
    else {
      __scheduling_clock = __scheduling_clock - 1;
    }
  }
  {
    static uint8_t __scheduling_clock = 1;
    if (__scheduling_clock == 0) {
      __assertion_checks(); __r0();  /* fibDvr.wait */
      __scheduling_clock = 19;
    }
    else {
      __scheduling_clock = __scheduling_clock - 1;
    }
  }

  __global_clock = __global_clock + 1;

}

// ---- This source is automatically generated by Atom ----

